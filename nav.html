<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MassPort | Catholic Travel Journal</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_KEY&libraries=places"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <style>
        :root {
            --primary: #2c3e50;
            --accent: #d4af37;
            --bg: #f8f9fa;
            --card-bg: #ffffff;
            --nav-width: 260px;
            --mobile-nav-height: 70px;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            margin: 0; 
            font-family: 'Inter', sans-serif; 
            background: var(--bg); 
            color: #333;
            overflow-x: hidden;
        }

        /* --- NAVIGATION LAYOUT --- */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Desktop Sidebar */
        nav.sidebar {
            width: var(--nav-width);
            background: white;
            border-right: 1px solid #eee;
            display: flex;
            flex-direction: column;
            padding: 20px;
            position: fixed;
            height: 100vh;
            z-index: 100;
        }

        /* Mobile Bottom Bar */
        nav.bottom-bar {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: var(--mobile-nav-height);
            background: white;
            border-top: 1px solid #eee;
            z-index: 1000;
            justify-content: space-around;
            align-items: center;
            padding: 0 10px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            color: #666;
            padding: 10px;
            transition: 0.2s;
            border-radius: 12px;
        }

        .nav-item.active { color: var(--primary); font-weight: 700; }
        .nav-item .material-symbols-rounded { font-size: 28px; }
        .nav-label { font-size: 11px; margin-top: 4px; }

        /* Middle Add Button (Mobile) */
        .add-tab-btn {
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: -30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        /* --- CONTENT AREA --- */
        main.content {
            flex: 1;
            margin-left: var(--nav-width);
            padding: 40px;
            max-width: 1200px;
        }

        section.view { display: none; }
        section.view.active { display: block; animation: fadeIn 0.3s ease; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- JOURNAL & STAMP STYLING --- */
        .filters-header {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        select.filter-select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            flex: 1;
            min-width: 150px;
        }

        /* Full Screen Journal Stamp */
        .journal-stamp {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .journal-stamp img {
            width: 100%;
            height: auto;
            max-height: 80vh;
            object-fit: cover;
            display: block;
        }

        .journal-stamp-content {
            padding: 25px;
        }

        .journal-church-name { font-size: 24px; font-weight: 800; margin-bottom: 5px; }
        .journal-location { color: #666; font-size: 16px; margin-bottom: 15px; }
        .journal-notes { font-family: 'Courier Prime', monospace; line-height: 1.6; border-top: 1px dashed #eee; padding-top: 15px; }

        /* Feed Card Styling */
        .feed-card {
            display: flex;
            background: white;
            border-radius: 12px;
            margin-bottom: 20px;
            overflow: hidden;
            border: 1px solid #eee;
        }

        .feed-img { width: 40%; aspect-ratio: 1/1; object-fit: cover; }
        .feed-info { width: 60%; padding: 15px; display: flex; flex-direction: column; }
        
        .user-pill { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; }
        .user-pill img { width: 24px; height: 24px; border-radius: 50%; }
        .user-pill span { font-weight: 600; font-size: 14px; }

        /* Search Bar */
        .search-container { margin-bottom: 20px; }
        .search-input { 
            width: 100%; 
            padding: 15px; 
            border-radius: 12px; 
            border: 1px solid #ddd; 
            font-size: 16px; 
        }

        /* Responsiveness */
        @media (max-width: 800px) {
            nav.sidebar { display: none; }
            nav.bottom-bar { display: flex; }
            main.content { margin-left: 0; padding: 20px; padding-bottom: 100px; }
            .feed-card { flex-direction: column; }
            .feed-img, .feed-info { width: 100%; }
            .journal-stamp img { max-height: 50vh; }
        }

        /* --- PREVIOUS STYLES (Kept for compatibility) --- */
        .hidden { display: none !important; }
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.8); z-index: 2000; 
            display: flex; align-items: center; justify-content: center;
        }
        .modal-card { background: white; width: 90%; max-width: 500px; padding: 25px; border-radius: 20px; max-height: 90vh; overflow-y: auto; }
        .control-btn { cursor: pointer; padding: 10px; display: flex; align-items: center; gap: 10px; }
        .profile-thumb { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }
    </style>
</head>
<body>

    <div class="app-container">
        <nav class="sidebar">
            <h2 style="font-weight: 900; letter-spacing: -1px; margin-bottom: 30px;">MassPort</h2>
            
            <div class="nav-item active" onclick="switchTab('journal')">
                <span class="material-symbols-rounded">menu_book</span>
                <span class="nav-label">My Journal</span>
            </div>
            <div class="nav-item" onclick="switchTab('feed')">
                <span class="material-symbols-rounded">rss_feed</span>
                <span class="nav-label">Feed</span>
            </div>
            <div class="nav-item" onclick="openAddModal()">
                <span class="material-symbols-rounded">add_circle</span>
                <span class="nav-label">Add Stamp</span>
            </div>
            <div class="nav-item" onclick="switchTab('discovery')">
                <span class="material-symbols-rounded">person_search</span>
                <span class="nav-label">Find People</span>
            </div>
            <div class="nav-item" onclick="switchTab('map-view')">
                <span class="material-symbols-rounded">map</span>
                <span class="nav-label">World Map</span>
            </div>

            <div style="margin-top: auto;" id="user-controls-desktop">
                </div>
        </nav>

        <nav class="bottom-bar">
            <div class="nav-item active" onclick="switchTab('journal')">
                <span class="material-symbols-rounded">menu_book</span>
            </div>
            <div class="nav-item" onclick="switchTab('feed')">
                <span class="material-symbols-rounded">rss_feed</span>
            </div>
            <div class="add-tab-btn" onclick="openAddModal()">
                <span class="material-symbols-rounded">add</span>
            </div>
            <div class="nav-item" onclick="switchTab('discovery')">
                <span class="material-symbols-rounded">person_search</span>
            </div>
            <div class="nav-item" onclick="switchTab('map-view')">
                <span class="material-symbols-rounded">map</span>
            </div>
        </nav>

        <main class="content">
            <section id="view-journal" class="view active">
                <h1 id="view-title">My Journal</h1>
                
                <div class="filters-header">
                    <select id="filter-location" class="filter-select" onchange="applyFilters()">
                        <option value="ALL">All Locations</option>
                    </select>
                    <select id="filter-year" class="filter-select" onchange="applyFilters()">
                        <option value="ALL">All Years</option>
                    </select>
                    <select id="sort-by" class="filter-select" onchange="applyFilters()">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                        <option value="az">Name A-Z</option>
                    </select>
                </div>

                <div id="journal-grid">
                    </div>
            </section>

            <section id="view-feed" class="view">
                <h1>Follower Feed</h1>
                <div id="feed-container">
                    <p style="color: #666;">Entries from people you follow will appear here.</p>
                </div>
            </section>

            <section id="view-discovery" class="view">
                <h1>Find People</h1>
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Search by username..." id="user-search">
                </div>
                <div id="users-list">
                    </div>
            </section>

            <section id="view-map-view" class="view">
                <h1>Pilgrimage Map</h1>
                <div id="big-map" style="width:100%; height: 500px; background: #ddd; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                    <p>Map Integration Coming Soon</p>
                </div>
            </section>
        </main>
    </div>

    <div id="modal-overlay" class="modal-overlay hidden">
        <div class="modal-card">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h2 id="modal-title">New Stamp</h2>
                <button onclick="closeModal()" style="background:none; border:none; font-size:24px; cursor:pointer;">&times;</button>
            </div>
            
            <input type="hidden" id="edit-id">
            <input type="hidden" id="current-img-url">
            
            <div id="preview-box" style="width:100%; height:200px; background:#f0f0f0; border-radius:12px; margin-bottom:15px; overflow:hidden; position:relative; cursor:pointer;" onclick="document.getElementById('s-image-input').click()">
                <img id="img-preview" style="width:100%; height:100%; object-fit:cover;">
                <div class="upload-placeholder" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center;">
                    <span class="material-symbols-rounded" style="font-size:48px; color:#aaa;">add_a_photo</span>
                    <p style="color:#aaa; font-size:12px;">Tap to add photo</p>
                </div>
            </div>
            <input type="file" id="s-image-input" class="hidden" accept="image/*" onchange="previewImage()">

            <input type="text" id="s-address" placeholder="Search for Church location..." style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; border:1px solid #ddd;">
            <input type="text" id="s-name" placeholder="Name of Church" style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; border:1px solid #ddd;">
            <textarea id="s-notes" placeholder="Reflections or notes..." style="width:100%; padding:12px; height:100px; margin-bottom:15px; border-radius:8px; border:1px solid #ddd;"></textarea>
            
            <div id="map-preview" style="width:100%; height:150px; border-radius:12px; margin-bottom:15px;"></div>

            <button id="save-btn" onclick="saveStamp()" style="width:100%; background:var(--primary); color:white; padding:15px; border:none; border-radius:12px; font-weight:700;">Save Stamp</button>
            
            <input type="hidden" id="geo-city">
            <input type="hidden" id="geo-state-code">
            <input type="hidden" id="geo-state-name">
            <input type="hidden" id="geo-country">
        </div>
    </div>

    <div id="login-modal" class="modal-overlay hidden">
        <div class="modal-card">
            <h2 style="font-weight:900;">Welcome Back</h2>
            <input type="email" id="login-input" placeholder="Email" style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; border:1px solid #ddd;">
            <input type="password" id="login-password" placeholder="Password" style="width:100%; padding:12px; margin-bottom:15px; border-radius:8px; border:1px solid #ddd;">
            <button onclick="handleLogin()" style="width:100%; background:var(--primary); color:white; padding:15px; border:none; border-radius:12px; font-weight:700; margin-bottom:10px;">Login</button>
            <p style="text-align:center; font-size:14px; color:#666;">Don't have an account? <a href="#" onclick="switchAuthMode('signup')">Sign Up</a></p>
            <div id="login-msg" style="color:red; font-size:12px; margin-top:10px;"></div>
        </div>
    </div>

    <div id="signup-modal" class="modal-overlay hidden">
        <div class="modal-card">
            <h2 style="font-weight:900;">Create Account</h2>
            <input type="text" id="signup-username" placeholder="Unique Username" style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; border:1px solid #ddd;">
            <input type="text" id="signup-displayname" placeholder="Display Name" style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; border:1px solid #ddd;">
            <input type="email" id="signup-email" placeholder="Email" style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; border:1px solid #ddd;">
            <input type="password" id="signup-password" placeholder="Password" style="width:100%; padding:12px; margin-bottom:15px; border-radius:8px; border:1px solid #ddd;">
            <button onclick="handleSignUp()" style="width:100%; background:var(--primary); color:white; padding:15px; border:none; border-radius:12px; font-weight:700;">Join MassPort</button>
            <p style="text-align:center; font-size:14px; color:#666; margin-top:10px;">Already have an account? <a href="#" onclick="switchAuthMode('login')">Login</a></p>
            <div id="signup-msg" style="color:red; font-size:12px; margin-top:10px;"></div>
        </div>
    </div>

    <script>
        // --- CONFIG & STATE ---
        const SUPABASE_URL = 'YOUR_SUPABASE_URL';
        const SUPABASE_KEY = 'YOUR_SUPABASE_ANON_KEY';
        const IMGBB_API_KEY = 'YOUR_IMGBB_KEY';
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        let currentUser = null;
        let userProfile = null;
        let globalStamps = [];
        let publicViewUser = window.location.hash.substring(1);

        // --- NAVIGATION LOGIC ---
        function switchTab(tabId) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            document.getElementById(`view-${tabId}`).classList.add('active');
            
            // Highlight the correct nav item in both bars
            document.querySelectorAll(`.nav-item`).forEach(n => {
                if(n.getAttribute('onclick')?.includes(tabId)) n.classList.add('active');
            });

            if(tabId === 'feed') fetchFeed();
            if(tabId === 'discovery') fetchUsers();
        }

        // --- AUTH LOGIC (Updated) ---
        supabaseClient.auth.onAuthStateChange((event, session) => {
            handleAuthState(session);
        });

        async function handleAuthState(session) {
            if (session?.user) {
                currentUser = session.user;
                const { data: profile } = await supabaseClient.from('profiles').select('*').eq('id', currentUser.id).single();
                userProfile = profile;
                
                document.getElementById('login-modal').classList.add('hidden');
                renderUserControls();
                fetchMyStamps();
            } else {
                if(!publicViewUser) document.getElementById('login-modal').classList.remove('hidden');
            }
        }

        function renderUserControls() {
            const container = document.getElementById('user-controls-desktop');
            if(userProfile) {
                container.innerHTML = `
                    <div class="control-btn" onclick="handleLogout()">
                        <img src="${userProfile.avatar_url || 'https://via.placeholder.com/150'}" class="profile-thumb">
                        <div style="font-size:12px;">
                            <strong>${userProfile.display_name}</strong><br>
                            Logout
                        </div>
                    </div>
                `;
            }
        }

        // --- JOURNAL LOGIC (Updated Layout) ---
        async function fetchMyStamps() {
            const { data } = await supabaseClient.from('stamps').select('*').eq('user_id', currentUser.id).order('created_at', {ascending: false});
            globalStamps = data;
            populateFilterOptions(data);
            applyFilters();
        }

        function populateFilterOptions(data) {
            const locSelect = document.getElementById('filter-location');
            const yearSelect = document.getElementById('filter-year');
            
            const locations = [...new Set(data.map(s => s.state_code || s.country_code))];
            const years = [...new Set(data.map(s => new Date(s.created_at).getFullYear()))];

            locations.forEach(l => locSelect.innerHTML += `<option value="${l}">${l}</option>`);
            years.forEach(y => yearSelect.innerHTML += `<option value="${y}">${y}</option>`);
        }

        function applyFilters() {
            const loc = document.getElementById('filter-location').value;
            const year = document.getElementById('filter-year').value;
            const sort = document.getElementById('sort-by').value;

            let filtered = [...globalStamps];

            if(loc !== 'ALL') filtered = filtered.filter(s => (s.state_code || s.country_code) === loc);
            if(year !== 'ALL') filtered = filtered.filter(s => new Date(s.created_at).getFullYear().toString() === year);

            if(sort === 'newest') filtered.sort((a,b) => new Date(b.created_at) - new Date(a.created_at));
            if(sort === 'oldest') filtered.sort((a,b) => new Date(a.created_at) - new Date(b.created_at));
            if(sort === 'az') filtered.sort((a,b) => a.name.localeCompare(b.name));

            renderJournal(filtered);
        }

        function renderJournal(stamps) {
            const grid = document.getElementById('journal-grid');
            grid.innerHTML = stamps.length ? '' : '<p>No stamps found for this filter.</p>';
            
            stamps.forEach(s => {
                const el = document.createElement('div');
                el.className = 'journal-stamp';
                el.innerHTML = `
                    ${s.img_url ? `<img src="${s.img_url}">` : `<div style="height:200px; background:#ddd;"></div>`}
                    <div class="journal-stamp-content">
                        <div class="journal-church-name">${s.name}</div>
                        <div class="journal-location">${s.city}</div>
                        ${s.notes ? `<div class="journal-notes">${s.notes}</div>` : ''}
                    </div>
                `;
                el.onclick = () => openAddModal(s);
                grid.appendChild(el);
            });
        }

        // --- DISCOVERY & FEED LOGIC ---
        async function fetchUsers() {
            const { data } = await supabaseClient.from('profiles').select('*').limit(20);
            const container = document.getElementById('users-list');
            container.innerHTML = '';
            data.forEach(u => {
                if(u.id === currentUser?.id) return;
                const div = document.createElement('div');
                div.className = 'feed-card';
                div.style.padding = '15px';
                div.style.alignItems = 'center';
                div.style.justifyContent = 'space-between';
                div.innerHTML = `
                    <div class="user-pill">
                        <img src="${u.avatar_url || 'https://via.placeholder.com/150'}">
                        <span>@${u.username}</span>
                    </div>
                    <button onclick="followUser('${u.id}')" style="background:var(--accent); border:none; padding:8px 15px; border-radius:20px; font-weight:700;">Follow</button>
                `;
                container.appendChild(div);
            });
        }

        async function fetchFeed() {
            // Simple mockup of feed - in production, you'd join with a 'follows' table
            const { data } = await supabaseClient.from('stamps').select('*, profiles(username, avatar_url, display_name)').limit(10).order('created_at', {ascending: false});
            const container = document.getElementById('feed-container');
            container.innerHTML = '';
            
            data.forEach(s => {
                const card = document.createElement('div');
                card.className = 'feed-card';
                card.innerHTML = `
                    <img src="${s.img_url || 'https://via.placeholder.com/400'}" class="feed-img">
                    <div class="feed-info">
                        <div class="user-pill">
                            <img src="${s.profiles.avatar_url || 'https://via.placeholder.com/150'}">
                            <span>${s.profiles.display_name} (@${s.profiles.username})</span>
                        </div>
                        <strong style="font-size:18px;">${s.name}</strong>
                        <span style="font-size:13px; color:#666;">${s.city}</span>
                        <p style="font-size:14px; margin-top:10px; font-style:italic;">${s.notes || ''}</p>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- STAMP SAVE LOGIC (Original) ---
        let autocomplete, googleMap, googleMarker;

        function initGoogleTools() {
            const input = document.getElementById('s-address');
            if (!input) return;
            autocomplete = new google.maps.places.Autocomplete(input);
            const mapEl = document.getElementById('map-preview');
            googleMap = new google.maps.Map(mapEl, { center: { lat: 39.82, lng: -98.57 }, zoom: 3, disableDefaultUI: true });
            googleMarker = new google.maps.Marker({ map: googleMap });

            autocomplete.addListener('place_changed', () => {
                const place = autocomplete.getPlace();
                if (!place.geometry) return;
                document.getElementById('s-name').value = place.name;
                googleMap.setCenter(place.geometry.location);
                googleMap.setZoom(15);
                googleMarker.setPosition(place.geometry.location);

                let city = '', stateCode = '', stateName = '', country = 'US';
                place.address_components.forEach(c => {
                    if (c.types.includes('locality')) city = c.long_name;
                    else if (c.types.includes('administrative_area_level_1')) { stateCode = c.short_name; stateName = c.long_name; }
                    else if (c.types.includes('country')) country = c.short_name;
                });
                document.getElementById('geo-city').value = city || place.name;
                document.getElementById('geo-state-code').value = stateCode;
                document.getElementById('geo-state-name').value = stateName;
                document.getElementById('geo-country').value = country;
            });
        }

        window.addEventListener('load', initGoogleTools);

        function openAddModal(existing = null) {
            document.getElementById('modal-overlay').classList.remove('hidden');
            if(existing) {
                document.getElementById('modal-title').innerText = "Edit Stamp";
                document.getElementById('edit-id').value = existing.id;
                document.getElementById('s-name').value = existing.name;
                document.getElementById('s-address').value = existing.city;
                document.getElementById('s-notes').value = existing.notes;
                document.getElementById('img-preview').src = existing.img_url || '';
                document.getElementById('current-img-url').value = existing.img_url || '';
            } else {
                document.getElementById('modal-title').innerText = "New Stamp";
                document.getElementById('edit-id').value = '';
                document.getElementById('s-name').value = '';
                document.getElementById('s-address').value = '';
                document.getElementById('s-notes').value = '';
                document.getElementById('img-preview').src = '';
            }
        }

        function closeModal() { document.getElementById('modal-overlay').classList.add('hidden'); }

        async function saveStamp() {
            const btn = document.getElementById('save-btn');
            btn.innerText = "Saving...";
            
            let imgUrl = document.getElementById('current-img-url').value;
            const file = document.getElementById('s-image-input').files[0];

            if (file) {
                const fd = new FormData(); fd.append('image', file);
                const res = await fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_API_KEY}`, { method: 'POST', body: fd });
                const json = await res.json();
                if (json.data) imgUrl = json.data.url;
            }

            const payload = {
                name: document.getElementById('s-name').value,
                city: document.getElementById('s-address').value,
                notes: document.getElementById('s-notes').value,
                img_url: imgUrl,
                user_id: currentUser.id,
                state_code: document.getElementById('geo-state-code').value,
                country_code: document.getElementById('geo-country').value,
                created_at: new Date()
            };

            const editId = document.getElementById('edit-id').value;
            if (editId) await supabaseClient.from('stamps').update(payload).eq('id', editId);
            else await supabaseClient.from('stamps').insert([payload]);

            closeModal();
            fetchMyStamps();
            btn.innerText = "Save Stamp";
        }

        function previewImage() {
            const file = document.getElementById('s-image-input').files[0];
            const reader = new FileReader();
            reader.onload = e => document.getElementById('img-preview').src = e.target.result;
            reader.readAsDataURL(file);
        }

        async function handleLogin() {
            const email = document.getElementById('login-input').value;
            const password = document.getElementById('login-password').value;
            const { error } = await supabaseClient.auth.signInWithPassword({ email, password });
            if (error) alert(error.message);
        }

        async function handleSignUp() {
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const username = document.getElementById('signup-username').value;
            const display_name = document.getElementById('signup-displayname').value;
            
            const { data, error } = await supabaseClient.auth.signUp({ email, password });
            if (data.user) {
                await supabaseClient.from('profiles').insert([{ id: data.user.id, username, display_name }]);
                alert("Check your email!");
            }
        }

        async function handleLogout() {
            await supabaseClient.auth.signOut();
            location.reload();
        }

        function switchAuthMode(mode) {
            document.getElementById('login-modal').classList.add('hidden');
            document.getElementById('signup-modal').classList.add('hidden');
            document.getElementById(`${mode}-modal`).classList.remove('hidden');
        }
    </script>
</body>
</html>
